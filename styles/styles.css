/* ==== Базовые улучшения для занятия 15 ==== */
:root{
  color-scheme: light dark;
  --bg: #0a0c12;
  --surface: #10131a;
  --surface-2: #141a24;
  --text: #e9eefb;
  --text-dimmed:#a8b0c3;
  --border: #243048;
  --radius: 14px;
  --shadow: 0 10px 30px rgba(0,0,0,.35);
  --brand:#6aa0ff;
  --brand-2:#9ab7ff;
  --brand-3:#59fcb3;
  --glow: rgba(106,160,255,.35);
  --ok:#22c55e;
  --warn:#f59e0b;
  --danger:#ef4444;
  --header-h: 64px;
  --footer-h: 60px;
}

@media (prefers-color-scheme: light){
  :root{
    --bg: #f3f6fc;
    --surface: #ffffff;
    --surface-2: #eef2f9;
    --text: #0b1220;
    --text-dimmed:#34425a;
    --border:#c6d0e1;
    --shadow: 0 10px 28px rgba(2,6,23,.09);
    --glow: rgba(106,160,255,.22);
    --brand:#4e76ff;
    --brand-2:#3458ff;
    --brand-3:#0bd89a;
  }
}

html,body{height:100%}
body.page{
  margin:0;
  font:16px/1.6 Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans", "Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";
  color:var(--text);
  background:
    radial-gradient(1200px 600px at 10% 0%, rgba(108,99,255,.11), transparent 60%),
    radial-gradient(1000px 600px at 95% 20%, rgba(89,252,179,.08), transparent 65%),
    linear-gradient(180deg, #0b1220 0%, var(--bg) 240px);
  position:relative;
  overflow-x:hidden;
  min-height:100vh;
  min-height:100svh;
  min-height:100dvh;
}

/* ===== Skip-link и фокус ===== */
.skip-link{
  position:absolute;
  inset-inline-start:1rem;
  inset-block-start:-100%;
  z-index:10000;
  padding:.5rem .75rem;
  background:#111;
  color:#fff;
  border-radius:.5rem;
  text-decoration:none;
}
.skip-link:focus,
.skip-link:focus-visible{ inset-block-start:1rem; }
:focus-visible{ outline:3px solid #2563eb; outline-offset:2px; }
a, button, input, textarea{ outline-offset:2px; }
@media (pointer:coarse){
  a, button, .nav__link, .chip, .btn{ min-height:44px; padding:.75rem 1rem; }
}

/* ===== Контейнер утилиты ===== */
.container{ max-width:1100px; margin:0 auto; padding:0 18px; }
main{ min-height: calc(100dvh - var(--header-h) - var(--footer-h)); }
.stack-lg > * + *{ margin-top: clamp(18px, 3vw, 30px); }
.section{ padding-inline: clamp(1rem, calc(.5rem + 1vw), 2rem); }

/* ===== Header (sticky + safe-area) ===== */
.site-header{
  position: sticky;
  top:0;
  z-index:10;
  background: rgba(16,19,26,.55);
  -webkit-backdrop-filter: blur(10px); backdrop-filter: blur(10px);
  border-bottom:1px solid rgba(255,255,255,.06);
  padding-block-start: calc(.5rem + env(safe-area-inset-top));
  padding-block-end:.5rem;
  padding-inline-start: calc(18px + env(safe-area-inset-left));
  padding-inline-end: calc(18px + env(safe-area-inset-right));
  isolation:isolate;
}
.header-inner{display:flex;align-items:center;gap:16px;min-height:var(--header-h)}
.logo{display:inline-flex;align-items:center;gap:10px;color:inherit;text-decoration:none}
.logo__text{font-weight:700;letter-spacing:.2px}

.site-nav{margin-left:auto;display:flex;gap:8px;flex-wrap:wrap}
.site-nav a{
  color: var(--text); text-decoration:none;
  padding:10px 12px; border-radius:12px;
  border:1px solid transparent;
  transition: background .18s ease, color .18s ease, border-color .18s ease, box-shadow .18s ease;
}
.site-nav a[aria-current="page"], .site-nav a:hover{
  background: linear-gradient(180deg, rgba(106,160,255,.10), rgba(106,160,255,.03));
  color: var(--brand-2);
  border-color: rgba(106,160,255,.25);
  box-shadow: 0 0 0 4px rgba(106,160,255,.08) inset;
}

/* ===== Hero (responsive avatar) ===== */
.hero{ display:grid; grid-template-columns: 120px 1fr; gap:18px; align-items:center; }
.hero__photo{
  inline-size:200px;
  block-size:auto;
  border-radius:50%;
  object-fit:cover;
  box-shadow:0 10px 15px -3px rgba(0,0,0,.1),0 4px 6px -4px rgba(0,0,0,.1);
}
.hero__actions{ margin-top:10px; }
@media (max-width:640px){ .hero{ grid-template-columns:1fr; } }

/* ===== Buttons ===== */
.btn, .button{
  --btn-bg: linear-gradient(180deg, var(--brand), #7fc3ff);
  display:inline-flex;align-items:center;justify-content:center;
  padding:10px 16px;border-radius:12px;border:1px solid rgba(255,255,255,.08);
  background: var(--btn-bg); color:#0b0e16;font-weight:700;
  box-shadow:0 8px 18px var(--glow);
  transition: transform .08s ease, filter .15s ease, box-shadow .15s ease;
}
.btn:hover, .button:hover{ filter:brightness(1.05); }
.btn:active, .button:active{ transform:translateY(1px); }
.btn--ghost{
  background: linear-gradient(180deg, rgba(106,160,255,.15), rgba(106,160,255,.05));
  color: var(--brand-2);
  border-color: rgba(106,160,255,.35);
  box-shadow: 0 6px 14px rgba(106,160,255,.18);
}

/* ===== Cards & layout ===== */
.card{
  background:
    linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,0) 40%),
    var(--surface);
  border:1px solid rgba(255,255,255,.06);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  padding: clamp(16px, 2.4vw, 24px);
  backdrop-filter: saturate(110%) blur(4px);
}

/* ===== Projects grid (auto-fit) + CQ ===== */
.cards-grid{
  display:grid;
  grid-template-columns: repeat(auto-fit, minmax(18rem, 1fr));
  gap: 18px;
}
.project-card{
  padding:16px;
  border:1px solid rgba(255,255,255,.06);
  border-radius:14px;
  background:
    linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,0) 50%),
    var(--surface-2);
  transition: transform .14s ease, border-color .14s ease, box-shadow .14s ease;
  box-shadow: 0 8px 20px rgba(0,0,0,.20);
  cursor: pointer;
  min-width:0;
}
.project-card:hover{
  transform:translateY(-3px);
  border-color: rgba(106,160,255,.35);
  box-shadow: 0 12px 26px rgba(106,160,255,.18);
}
.project-card--static{ cursor: default; }
.project-card--static:hover{ transform:none; border-color: rgba(255,255,255,.06); }
.project-card__title{ margin:0 0 6px; font-size:18px; font-weight:700; }
.project-card__description{ overflow-wrap:anywhere; }

/* Container Queries (прогрессивно) */
@supports (container-type: inline-size){
  .projects-area{
    container-type: inline-size;
    container-name: projects;
  }
  @container projects (min-width:640px){
    .projects-list{ grid-template-columns: repeat(2, 1fr); }
  }
  @container projects (min-width:960px){
    .projects-list{ grid-template-columns: repeat(3, 1fr); }
  }
}

/* ===== Timeline ===== */
.timeline{
  list-style:none; margin:0; padding:0; display:grid; gap:12px;
}
.timeline li{
  --accent1: var(--brand);
  --accent2: var(--brand-3);
  padding:12px 14px;
  border-radius:12px;
  background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,.00));
  border:1px solid rgba(255,255,255,.06);
  position:relative;
}
.timeline li::before{
  content:""; position:absolute; left:-1px; top:0; bottom:0; width:4px;
  background: linear-gradient(180deg, var(--accent1), var(--accent2));
  border-top-left-radius:12px; border-bottom-left-radius:12px;
}
.timeline li.is-done{ --accent1:#22c55e; --accent2:#59fcb3; border-style:solid; }
.timeline li.is-progress{ --accent1:#f59e0b; --accent2:#fdba74; border-style:dashed; }

.status{
  display:inline-flex;
  align-items:center;
  gap:6px;
  padding:4px 10px;
  margin-left:12px;
  border-radius:999px;
  border:1px solid transparent;
  font-size:14px;
  line-height:1;
  white-space:nowrap;
  font-weight:600;
}
.status--done{
  color:#9df5be;
  background: rgba(34,197,94,.28);
  border-color: rgba(34,197,94,.65);
}
.status--done::before{ content:"✓"; }
.status--progress{
  color:#ffe0a3;
  background: rgba(245,158,11,.28);
  border-color: rgba(245,158,11,.65);
}
.status--progress::before{ content:"⏳"; }

/* ===== Progress bars ===== */
.skills{ list-style:none; margin:0; padding:0; display:grid; gap:12px; }
.skills li{ display:grid; grid-template-columns: 170px 1fr auto; gap:12px; align-items:center; }
.progress{
  position:relative; height:12px;
  background:linear-gradient(180deg, rgba(255,255,255,.03), rgba(0,0,0,.15));
  border-radius:999px; border:1px solid rgba(255,255,255,.08); overflow:hidden;
}
.progress > span{
  position:absolute; left:0; top:0; height:100%; width:var(--value,0);
  background: linear-gradient(90deg, var(--brand), var(--brand-3));
  box-shadow: 0 0 16px rgba(106,160,255,.35);
}
.progress__value{ font-variant-numeric: tabular-nums; color:var(--text-dimmed); }

.skills + .actions{ margin-top: clamp(16px, 3.2vw, 32px); }

/* ===== Filters ===== */
.section-head{display:flex;align-items:center;gap:12px;justify-content:space-between;flex-wrap:wrap}
.filters{display:flex;gap:10px}
.chip{
  border:1px solid rgba(255,255,255,.08);
  background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(0,0,0,.10));
  color:var(--text);
  border-radius:999px; padding:8px 14px; cursor:pointer;
  transition: background .18s ease, color .18s ease, box-shadow .18s ease, border-color .18s ease;
}
.chip.is-active{
  color:#0b0e16;
  background: linear-gradient(180deg, var(--brand), #7fc3ff);
  border-color: rgba(106,160,255,.6);
  box-shadow: 0 8px 18px var(--glow);
}

/* ===== Modal ===== */
.modal{position:fixed; inset:0; display:none;}
.modal[aria-hidden="false"]{display:block;}
.modal__backdrop{
  position:absolute; inset:0;
  background:linear-gradient(180deg, rgba(10,12,18,.6), rgba(10,12,18,.8));
  backdrop-filter: blur(2px);
}
.modal__dialog{
  position:relative; z-index:1; max-width:640px; margin:10vh auto 0;
  background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.01) 55%), var(--surface);
  border:1px solid rgba(255,255,255,.08); border-radius:16px;
  padding:22px; box-shadow: 0 30px 80px rgba(0,0,0,.45);
  animation: modalIn .18s ease-out;
}
@keyframes modalIn{ from{ transform: translateY(6px); opacity:.0 } to{ transform:none; opacity:1 } }
.modal__close{
  position:absolute; top:8px; right:10px; border:none; background:transparent;
  color:var(--text-dimmed); font-size:26px; cursor:pointer; border-radius:8px; padding:4px;
}
.modal__close:hover{ background: rgba(255,255,255,.06); color:var(--text); }
.modal__actions{display:flex; gap:10px; margin-top:12px; flex-wrap:wrap}
.modal__form{ display:grid; gap:12px; margin-top:12px; }
.modal__gallery{
  margin-top:12px;
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap:10px;
}
.modal__gallery img{
  width:100%; height:220px; object-fit:cover;
  border-radius:12px; border:1px solid rgba(255,255,255,.08);
  background:#0b0e16;
  box-shadow:0 6px 14px rgba(0,0,0,.18);
}
@media (max-width:640px){
  .modal__gallery{ grid-template-columns:1fr; }
  .modal__gallery img{ height:180px; }
}

/* ===== Form ===== */
.contact-form{display:grid; gap:14px; max-width:640px;}
.field{display:grid; gap:6px;}
.field label{ color:var(--text-dimmed); font-weight:600; }
.field input,.field textarea{
  width:100%; padding:12px 14px; border-radius:12px;
  border:1px solid rgba(255,255,255,.10);
  background:linear-gradient(180deg, rgba(255,255,255,.03), rgba(0,0,0,.10));
  color:var(--text);
}
.field input:focus,.field textarea:focus{
  outline:2px solid rgba(106,160,255,.45);
  box-shadow:0 0 0 4px rgba(106,160,255,.10);
}
.error{ color:var(--danger); min-height:1em; }
.form-status{ margin-top:4px; color:var(--ok); }
.contact-list{ list-style:none; margin:0; padding:0; display:grid; gap:10px; }
.icon{
  width:18px; height:18px; margin-right:8px; vertical-align:middle;
  filter: invert(1) brightness(1.6) contrast(.9); opacity:.95;
}
@media (prefers-color-scheme: light){
  .icon{ filter:none; opacity:.9; }
}

/* ===== Footer (safe-area) ===== */
.site-footer.footer{
  margin:40px 0 20px;
  color:var(--text-dimmed);
  text-align:center;
  min-height:var(--footer-h);
  display:flex; align-items:center; justify-content:center;
  border-top:1px solid rgba(255,255,255,.06);
  padding-bottom: calc(1rem + env(safe-area-inset-bottom));
}

/* ===== Reduced motion ===== */
@media (prefers-reduced-motion: reduce){
  *{ animation:none !important; transition:none !important; }
}

/* ===== Adaptive ===== */
@media (max-width:980px){
  .skills li{ grid-template-columns: 1fr 1fr auto; }
}
@media (max-width:640px){
  .skills li{ grid-template-columns:1fr; align-items:stretch; }
}

/* ===== Theme explicit overrides ===== */
:root[data-theme="light"]{
  --bg: #f3f6fc;
  --surface:#ffffff;
  --surface-2:#eef2f9;
  --text:#0b1220;
  --text-dimmed:#34425a;
  --border:#c6d0e1;
  --shadow: 0 10px 28px rgba(2,6,23,.09);
  --brand:#4e76ff;
  --brand-2:#3458ff;
  --brand-3:#0bd89a;
}
:root[data-theme="dark"]{
  --bg: #0a0c12;
  --surface:#10131a;
  --surface-2:#141a24;
  --text:#e9eefb;
  --text-dimmed:#a8b0c3;
  --border:#243048;
  --shadow:0 10px 30px rgba(0,0,0,.35);
  --brand:#6aa0ff;
  --brand-2:#9ab7ff;
  --brand-3:#59fcb3;
}

/* ===== Contrast (progressive) ===== */
@media (prefers-contrast: more){
  .button, .chip, .btn{ box-shadow: inset 0 0 0 2px #fff; }
}

/* ===== Prose max-width ===== */
.prose{ max-width:65ch; }